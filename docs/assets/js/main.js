"use strict";let dataObject={palette:"",typography:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:"",skills:["","",""]};const greenPaletteElement=document.querySelector("#palette__green"),redPaletteElement=document.querySelector("#palette__red"),grayPaletteElement=document.querySelector("#palette__gray"),profileDataElement=document.querySelector(".profile__data");function greenProfileDataHandler(){profileDataElement.classList.add("green"),profileDataElement.classList.remove("red","gray")}function redProfileDataHandler(){profileDataElement.classList.add("red"),profileDataElement.classList.remove("green","gray")}function grayProfileDataHandler(){profileDataElement.classList.add("gray"),profileDataElement.classList.remove("green","red")}greenPaletteElement.addEventListener("click",greenProfileDataHandler),redPaletteElement.addEventListener("click",redProfileDataHandler),grayPaletteElement.addEventListener("click",grayProfileDataHandler);const ubuntu=document.querySelector("#font__option--1"),comic=document.querySelector("#font__option--2"),montserrat=document.querySelector("#font__option--3"),profileDataGroup=document.querySelector(".profile__data-group");function ubuntuProfileDataHandler(){profileDataGroup.classList.add("font-ubuntu"),profileDataGroup.classList.remove("font-comic","font-montserrat")}function comicProfileDataHandler(){profileDataGroup.classList.add("font-comic"),profileDataGroup.classList.remove("font-ubuntu","font-montserrat")}function montserratProfileDataHandler(){profileDataGroup.classList.add("font-montserrat"),profileDataGroup.classList.remove("font-ubuntu","font-comic")}ubuntu.addEventListener("click",ubuntuProfileDataHandler),comic.addEventListener("click",comicProfileDataHandler),montserrat.addEventListener("click",montserratProfileDataHandler);const firstChild=document.querySelector("#first_child"),secondChild=document.querySelector("#second_child"),thirdChild=document.querySelector("#third_child"),create=document.querySelector(".button__create-card"),content=document.querySelector(".create__mesage"),thirdBlock=document.querySelector(".third_block");function openFun(e){e.currentTarget.classList.toggle("active"),e.currentTarget.classList.contains("active")?e.currentTarget.parentElement.classList.add("open"):e.currentTarget.parentElement.classList.remove("open")}function showLink(e){create.classList.toggle("active"),e.currentTarget.classList.contains("active")?(content.classList.add("show"),thirdBlock.classList.add("add_height")):(content.classList.remove("show"),thirdBlock.classList.remove("add_height"))}firstChild.addEventListener("click",openFun),secondChild.addEventListener("click",openFun),thirdChild.addEventListener("click",openFun),create.addEventListener("click",showLink);const fr=new FileReader,uploadBtn=document.querySelector(".button__add--image"),fileField=document.querySelector("#img-selector"),profileImages=document.querySelectorAll(".profile__image");function getImage(e){var t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){for(const e of profileImages)e.style.backgroundImage=`url(${fr.result})`,console.log(fr.result),updateDataObject("photo",fr.result),updateLocalStorage()}function fakeFileClick(){fileField.click()}function updateDataObject(e,t){dataObject[e]=t}function updateLocalStorage(){localStorage.setItem("dataObject",JSON.stringify(dataObject))}fileField.addEventListener("change",getImage),uploadBtn.addEventListener("click",fakeFileClick);let fullNameInput=document.body.querySelector("#name-input"),fullNameLabel=document.body.querySelector("#name");function updateFullName(e){fullNameLabel.innerText=e.target.value,updateDataObject("name",e.target.value),updateLocalStorage()}fullNameInput.addEventListener("keyup",updateFullName);let jobPositionInput=document.body.querySelector("#job-input"),jobPositionLabel=document.body.querySelector("#job-card");function updateJobPosition(e){jobPositionLabel.innerText=e.target.value,updateDataObject("job",e.target.value),updateLocalStorage()}jobPositionInput.addEventListener("keyup",updateJobPosition);let skillsList=document.querySelector("#container-checkboxes");console.log(skillsList);let skillsCard=document.querySelector("#container-checkboxes-card"),skills=[];function updateSkills(){let e=0;skillsCard.innerHTML="";let t=skillsList.querySelectorAll("li"),a=[];for(const n of t){let t=n.querySelector("input");if(e<3&&t.checked){console.log(e),console.log(t);let o=document.createElement("li");o.style='list-style-type: none; padding: 1px; font-family:"Open Sans", sans-serif; font-weight: 400; font-size: 13px; color: white; background-color: #438792; width: 80px; border-radius: 4px; margin: 2px; display: inline-block; text-align: center;';let l=document.createTextNode(`${n.textContent}`);o.appendChild(l),a.push(t.value),skillsCard.appendChild(o),e++}}updateDataObject("skills",a),updateLocalStorage()}function init(){let e=dataObject.skills;fetch("https://raw.githubusercontent.com/Adalab/dorcas-s2-proyecto-data/master/skills.json").then(e=>e.json()).then(function(t){console.log(t);let a=t.skills;console.log(a);let n=document.querySelector("#container-checkboxes");n.innerHTML="";for(let t=0;t<a.length;t++){let o=a[t];console.log(o);let l=document.createElement("li"),r=document.createElement("input");r.type="checkbox",r.value=o,r.addEventListener("click",updateSkills),-1!==e.indexOf(o)?r.checked=!0:r.checked=!1,l.appendChild(r),l.style="list-style-type: none; margin-left: 6px;";let c=document.createTextNode(`${o}`);l.appendChild(c),n.appendChild(l)}})}let emailInput=document.body.querySelector("#email-input");console.log("email",emailInput);let emailLabel=document.querySelector("#email-card");function updateEmail(e){console.log(e),document.querySelector("#email-card").href=`mailto:${e.currentTarget.value}`,updateDataObject("email",e.currentTarget.value),updateLocalStorage()}console.log("emaillabel",emailLabel),emailInput.addEventListener("keyup",updateEmail);let githubInput=document.body.querySelector("#github-input"),githubLabel=document.querySelector("#github-card");function updateGithub(e){githubLabel.href=`https://${e.currentTarget.value}`,updateDataObject("github",e.currentTarget.value),updateLocalStorage()}githubInput.addEventListener("keyup",updateGithub);let linkedinInput=document.body.querySelector("#linkedin-input"),linkedinLabel=document.querySelector("#linkedin-card");function updateLinkedin(e){linkedinLabel.href=`https://www.${e.currentTarget.value}`,updateDataObject("linkedin",e.currentTarget.value),updateLocalStorage()}linkedinInput.addEventListener("keyup",updateLinkedin);let telInput=document.body.querySelector("#telf_movil"),telLabel=document.querySelector("#tel-card");function updateTelephone(e){telLabel.href=`tel:${e.currentTarget.value}`,updateDataObject("phone",e.currentTarget.value),updateLocalStorage()}console.log("telLAbel",telLabel),telInput.addEventListener("keyup",updateTelephone);let inputGreen=document.querySelector("#palette__green"),inputRed=document.querySelector("#palette__red"),inputGray=document.querySelector("#palette__gray");function savePalette(){!0===inputGreen.checked?(console.log("green"),dataObject.palette="1",updateDataObject("palette","1")):!0===inputRed.checked?(console.log("red"),dataObject.palette="2",updateDataObject("palette","2")):!0===inputGray.checked?(console.log("gray"),dataObject.palette="3",updateDataObject("palette","3")):console.log("green"),updateLocalStorage()}inputGreen.addEventListener("click",savePalette),inputRed.addEventListener("click",savePalette),inputGray.addEventListener("click",savePalette);let inputUbuntu=document.querySelector("#font__option--1"),inputComicSans=document.querySelector("#font__option--2"),inputMontserrat=document.querySelector("#font__option--3");function saveTypography(){!0===inputUbuntu.checked?(console.log("ubuntu"),dataObject.typography="u",updateDataObject("typography","u")):!0===inputComicSans.checked?(console.log("ComicSans"),dataObject.typography="c",updateDataObject("typography","c")):!0===inputMontserrat.checked?(console.log("Montserrat"),dataObject.typography="m",updateDataObject("typography","m")):console.log("ComicSans"),updateLocalStorage()}inputUbuntu.addEventListener("click",saveTypography),inputComicSans.addEventListener("click",saveTypography),inputMontserrat.addEventListener("click",saveTypography);let url="https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",button=document.querySelector(".button__create-card");const cardLink=document.querySelector(".title__card--link"),tweetbutton=document.querySelector(".twitter");function apiCall(e){fetch(url,{method:"POST",body:JSON.stringify(dataObject),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{cardLink.innerHTML=e.cardURL,tweetbutton.href="https://twitter.com/intent/tweet?text=%C2%A1He%20creado%20esta%20tarjeta%20personalizada%20con%20Awesome%20Profile%20Card%20de%20undefined-team!%20âœ¨"+e.cardURL}).catch(e=>console.error("Error:",e))}function getLocalStorage(){let e=localStorage.getItem("dataObject"),t=JSON.parse(e);if(console.log(t),null!==t&&(dataObject=t,fullNameInput.value=dataObject.name,fullNameLabel.innerHTML=dataObject.name,jobPositionLabel.innerHTML=dataObject.job,jobPositionInput.value=dataObject.job,""===dataObject.name&&(fullNameLabel.innerText="Name Surname"),""===dataObject.job&&(jobPositionLabel.innerText="Job"),emailInput.value=dataObject.email,emailLabel.href=dataObject.email,linkedinInput.value=dataObject.linkedin,linkedinLabel.href=dataObject.linkedin,telInput.value=dataObject.phone,telLabel.href=dataObject.phone,githubInput.value=dataObject.github,githubLabel.href=dataObject.github,""!==dataObject.photo))for(const e of profileImages)e.style.backgroundImage=`url(${dataObject.photo})`}button.addEventListener("click",apiCall),getLocalStorage(),init();const resetBtn=document.querySelector(".profile__action"),form=document.querySelector("#form"),colorForm=document.querySelector("#color-form"),fontForm=document.querySelector("#font-form");function resetAll(){dataObject={palette:"",typography:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:"",skills:["","",""]},updateLocalStorage(),cardLink.innerHTML="Share the card with your friends!",tweetbutton.href="",form.reset(),colorForm.reset(),fontForm.reset(),fullNameLabel.innerText="Name Surname",jobPositionLabel.innerText="Job",profileImages[0].style.backgroundImage=dataObject.photo,profileImages[1].style.backgroundImage=dataObject.photo}resetBtn.addEventListener("click",resetAll);